<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Final JS project</title>
        <link rel="stylesheet" href="../CSS/style.css" />
        <link rel="stylesheet" href="../CSS/modal.css" />
        <script type="module" src="../JS/script.js"></script>
    </head>
    <body>
        <div class="modal-overlay" id="modalOverlay">
            <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-legend">
                <button id="closeBtn" class="close-button" aria-label="Close add task modal">&times;</button>
                <form>
                    <fieldset>
                        <legend id="modal-legend">New Task Data</legend>
                        <div class="form-group">
                            <label for="task-is-done">Done:</label>
                            <input type="checkbox" id="task-is-done" />
                        </div>

                        <div class="form-group">
                            <label for="task-group">Group:</label>
                            <input list="groups" id="task-group" />
                            <datalist id="groups">
                                <option value="New group"></option>
                            </datalist>
                        </div>

                        <div class="form-group slider-row">
                            <label for="task-priority">Priority</label>
                            <div class="slider-wrapper">
                                <div class="priority-labels-top">
                                    <span>LOWEST</span>
                                    <output id="priority-value" class="priority-output" for="task-priority">5</output>
                                    <span>HIGHEST</span>
                                </div>

                                <input
                                    type="range"
                                    id="task-priority"
                                    min="0"
                                    max="10"
                                    step="1"
                                    value="5"
                                    list="priority-ticks"
                                    class="priority-slider"
                                />
                                <datalist id="priority-ticks">
                                    <option value="10"></option>
                                    <option value="9"></option>
                                    <option value="8"></option>
                                    <option value="7"></option>
                                    <option value="6"></option>
                                    <option value="5"></option>
                                    <option value="4"></option>
                                    <option value="3"></option>
                                    <option value="2"></option>
                                    <option value="1"></option>
                                    <option value="0"></option>
                                </datalist>

                                <div class="priority-labels-bottom">
                                    <span>10</span>
                                    <span>0</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="task-details">Task details:</label>
                            <input type="text" id="task-details" required />
                        </div>
                        <div class="form-group">
                            <label for="task-deadline">Deadline:</label>
                            <input type="datetime-local" id="task-deadline" required />
                        </div>
                        <button type="submit" id="submitBtn">Add task</button>
                    </fieldset>
                </form>
            </div>
        </div>

        <div class="history-modal-overlay" id="historyModalOverlay">
            <div class="history-modal" role="dialog" aria-modal="true" aria-labelledby="history-modal-legend">
                <button id="historyCloseBtn" class="history-close-button" aria-label="Close history modal">
                    &times;
                </button>
                <form>
                    <fieldset>
                        <legend id="history-modal-legend">Task history changes</legend>
                        <table id="history-table">
                            <caption class="visually-hidden">
                                Task history changes
                            </caption>
                            <thead>
                                <tr class="column-header">
                                    <th>Select</th>
                                    <th>ID</th>
                                    <th>Done</th>
                                    <th>Task group</th>
                                    <th>Priority</th>
                                    <th>Task details</th>
                                    <th>Dead line</th>
                                    <th>Created at</th>
                                    <th>Updated at</th>
                                </tr>
                            </thead>
                            <tbody id="history-body">
                                <tr>
                                    <td>
                                        <input type="checkbox" aria-label="Select row" />
                                    </td>
                                    <td>10</td>
                                    <td>
                                        <input type="checkbox" aria-label="Task is done" />
                                    </td>
                                    <td>Home</td>
                                    <td>1</td>
                                    <td>Create first task and put it into the DB</td>
                                    <td>9/Feb/2019 10:56 (Isr TZ)</td>
                                    <td>9/Mar/2026 10:56 (Isr TZ)</td>
                                    <td>22/Jun/2028 22:12 (Isr TZ)</td>
                                </tr>
                            </tbody>
                        </table>
                        <button type="submit" id="historySubmitBtn">Close history</button>
                    </fieldset>
                </form>
            </div>
        </div>

        <div class="filter-modal-overlay" id="filterModalOverlay">
            <div class="filter-modal" role="dialog" aria-modal="true" aria-labelledby="filter-modal-legend">
                <button id="filterCloseBtn" class="filter-close-button" aria-label="Close filter modal">&times;</button>
                <form id="logicalOperatorsForm">
                    <fieldset>
                        <legend id="filter-modal-legend">Logical operators</legend>
                        <span id="drag-hint" class="visually-hidden">Drag to the filter field below</span>
                        <div class="drag-row">
                            <button
                                type="button"
                                class="drag-btn"
                                draggable="true"
                                data-type="operator"
                                aria-label="Logical AND operator"
                                aria-describedby="drag-hint"
                            >
                                AND
                            </button>
                            <button
                                type="button"
                                class="drag-btn"
                                draggable="true"
                                data-type="operator"
                                aria-label="Logical OR operator"
                                aria-describedby="drag-hint"
                            >
                                OR
                            </button>
                            <button
                                type="button"
                                class="drag-btn"
                                draggable="true"
                                data-type="operator"
                                aria-label="Open parenthesis"
                                aria-describedby="drag-hint"
                            >
                                (
                            </button>
                            <button
                                type="button"
                                class="drag-btn"
                                draggable="true"
                                data-type="operator"
                                aria-label="Close parenthesis"
                                aria-describedby="drag-hint"
                            >
                                )
                            </button>
                        </div>
                    </fieldset>
                </form>

                <form id="relationsForm">
                    <fieldset>
                        <legend>Relations</legend>
                        <div
                            class="filter-row"
                            id="draggableRow"
                            draggable="true"
                            role="group"
                            aria-label="Filter condition row, draggable"
                            aria-describedby="drag-hint"
                        >
                            <div class="field-group">
                                <label for="field-name">Field name:</label>
                                <select class="field" id="field-name" data-type="bool">
                                    <option value="task-select" data-type="bool">select</option>
                                    <option value="task-id" data-type="number">id</option>
                                    <option value="task-isDone" data-type="bool">isDone</option>
                                    <option value="task-priority" data-type="number">priority</option>
                                    <option value="task-group" data-type="string">group</option>
                                    <option value="task-details" data-type="string">details</option>
                                    <option value="task-deadline" data-type="date-time">deadline</option>
                                    <option value="task-createdAt" data-type="date-time">createdAt</option>
                                    <option value="task-updatedAt" data-type="date-time">updatedAt</option>
                                </select>
                            </div>
                            <div class="field-group">
                                <label for="operation">Operation:</label>
                                <select class="operation" id="operation"></select>
                            </div>
                            <div class="field-group">
                                <label>Value:</label>
                                <div class="value-container" id="field-value"></div>
                            </div>
                        </div>
                    </fieldset>
                </form>

                <form id="finalFilterForm">
                    <fieldset>
                        <legend>Final filter</legend>
                        <textarea
                            id="finalFilter"
                            rows="5"
                            aria-label="Final filter result"
                            readonly
                            aria-readonly="true"
                        ></textarea>
                    </fieldset>
                </form>
                <div class="filter-buttons">
                    <button type="button" id="dropFilter" class="hide-if-no-tasks hide-if-no-filter">
                        Drop filter
                    </button>
                    <button type="button" id="clearFilter">Clear filter</button>
                    <button type="submit" id="filterSubmitBtn">Apply filter</button>
                </div>
            </div>
        </div>

        <div class="statistic-modal-overlay" id="statisticModalOverlay">
            <div class="statistic-modal" role="dialog" aria-modal="true" aria-labelledby="statistic-modal-legend">
                <button id="statisticCloseBtn" class="statistic-close-button" aria-label="Close statistic modal">
                    &times;
                </button>
                <form>
                    <fieldset>
                        <legend id="statistic-modal-legend">Global task review</legend>
                        <table id="statistic-table">
                            <caption class="visually-hidden">
                                Task statistics
                            </caption>
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Number of tasks</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Total tasks</td>
                                    <td id="total-task"></td>
                                </tr>
                                <tr>
                                    <td>Marked as Done</td>
                                    <td id="done"></td>
                                </tr>
                                <tr>
                                    <td>Priority-0</td>
                                    <td id="p0"></td>
                                </tr>
                                <tr>
                                    <td>Priority-1</td>
                                    <td id="p1"></td>
                                </tr>
                                <tr>
                                    <td>Priority-2</td>
                                    <td id="p2"></td>
                                </tr>
                                <tr>
                                    <td>Priority-3</td>
                                    <td id="p3"></td>
                                </tr>
                                <tr>
                                    <td>Priority-4</td>
                                    <td id="p4"></td>
                                </tr>
                                <tr>
                                    <td>Priority-5</td>
                                    <td id="p5"></td>
                                </tr>
                                <tr>
                                    <td>Priority-6</td>
                                    <td id="p6"></td>
                                </tr>
                                <tr>
                                    <td>Priority-7</td>
                                    <td id="p7"></td>
                                </tr>
                                <tr>
                                    <td>Priority-8</td>
                                    <td id="p8"></td>
                                </tr>
                                <tr>
                                    <td>Priority-9</td>
                                    <td id="p9"></td>
                                </tr>
                                <tr>
                                    <td>Priority-10</td>
                                    <td id="p10"></td>
                                </tr>
                                <tr>
                                    <td>Groups</td>
                                    <td id="groups-stat"></td>
                                </tr>
                                <tr>
                                    <td>Latest deadline</td>
                                    <td id="latest-dead"></td>
                                </tr>
                                <tr>
                                    <td>Closest deadline</td>
                                    <td id="closest-dead"></td>
                                </tr>
                                <tr>
                                    <td>Mostly changed</td>
                                    <td id="mostly-changed"></td>
                                </tr>
                            </tbody>
                        </table>
                        <button type="submit" id="statisticSubmitBtn">Close</button>
                    </fieldset>
                </form>
            </div>
        </div>

        <div class="intro-modal-overlay" id="introModalOverlay">
            <div class="intro-modal" role="dialog" aria-modal="true" aria-labelledby="intro-modal-legend">
                <button id="introCloseBtn" class="intro-close-button" aria-label="Close intro modal">&times;</button>
                <form>
                    <fieldset>
                        <legend id="intro-modal-legend">Intro or please ReadMe</legend>
                        <details>
                            <summary>Available functionality</summary>
                            <div class="preformated">
1) BASIC FUNCTIONALITY for single task: 

    - ADD - button "Add new task" in managing panel
    - DELETE - button "--" in Actions column of the table (available after task creation) 
    - HIDE - button "-" in Actions column of the table (available after task creation) 
    - EDIT - button "+" in Actions column of the table (available after task creation) 
    
2) EXPORT button functionality: 

    On click new buttons appears to allow 
    - Export to localstorage && REPLACE the tasks currently located in the localstorage 
    - Export to localstorage && ADD to the tasks currently located in the localstorage 
    - Export to local disk 
    
3) IMPORT button functionality: 

On click new buttons appears to allow 
    - Import from localstorage && REPLACE current tasks in the table 
    - Import from localstorage && ADD to current tasks in the table 
    - Import from local disk && REPLACE the current tasks in the table 
    - Import from local disk && ADD to the current tasks in the table 

4) FILTERING by the following fields: 
    
    - id 
    - select 
    - status 
    - group 
    - priority 
    - details 
    - deadline 
    - creation date 
    - update date 
    
    __WARNING: Available only if tasks exists (on screen/in TaskManager) !!! 
    
5) SORTING once clicking on appropriate table header, ASC and DESC 
    
    - by id 
    - by task execution status 
    - by priority 
    - by group name 
    - by deadlines 
    - by creation date 
    - by update date 
    
6) HISTORY of each task: 
    When clicking the "..." button in the "Actions" column of the appropriate row, a new History modal window should open, showing all changes related to the task. 
    
7) STATISTICS of the tasks: 
    Statistics will be counted according to the menu â€” for ALL or for SELECTED tasks. When the "Statistics" button in the appropriate menu is clicked, a new modal will open. The following options will be available for the retrospective:
        
    Total tasks = number of tasks 
    Done = number of tasks with status "done" 
    Priority-0 = number of tasks with priority 0 
    Priority-1 = number of tasks with priority 1 
    ...
    Priority-10 = number of tasks with priority 10 
    Groups = count of groups 
    Latest deadline = @id of task with (date of latest deadline) 
    Closest deadline = @id of task with (date of closest deadline) 
    Mostly changed = @id of task with longest history (number of changes) 
    
    __WARNING: Available only if tasks exists (on screen/in TaskManager) !!!

8) INTRO modal 
    
    - explanation about application functionality
    - option to generate test data
                            </div>
                        </details>
                        <details>
                            <summary class="warning">Test mode configuration</summary>
                            <div class="preformated">
                                You can provide the desired sizes of the auto-generated data below. This will allow you
                                to immediately enjoy all the available functionality. The data will be randomly
                                generated.

                                <div class="warning">!!! Please note</div>
                                The localStorage size is restricted to ~5MB (depend on browser & OS), so no more than
                                100 tasks, each with a history of 100 changes, can be saved in localStorage.

                                <div class="warning">!!! Please note</div>
                                The number of auto-generated History tasks is UP to your number and NOT EQUAL TO.You
                                always can do some changes manually and reach the needed number of changes in task
                                history.

                                <div class="warning">TEST CONFIGURATION:</div>
                                <div class="form-group">
                                    <label for="test-data-main-table">Tasks to be generated on table:</label>
                                    <input type="number" id="test-data-main-table" placeholder="012..." min="0" />
                                </div>
                                <div class="form-group">
                                    <label for="test-data-main-table-his"
                                        >History changes for each task on table (up to):</label
                                    >
                                    <input type="number" id="test-data-main-table-his" placeholder="012..." min="0" />
                                </div>
                                <div class="form-group">
                                    <label for="test-data-locstor-table">Tasks to be generated for localStorage:</label>
                                    <input type="number" id="test-data-locstor-table" placeholder="012..." min="0" />
                                </div>
                                <div class="form-group">
                                    <label for="test-data-locstor-table-his"
                                        >History changes for each task in localStorage (up to):</label
                                    >
                                    <input
                                        type="number"
                                        id="test-data-locstor-table-his"
                                        placeholder="012..."
                                        min="0"
                                    />
                                </div>
                                <div class="form-group">
                                    <label for="test-data-start">Dates generated from:</label>
                                    <input type="datetime-local" id="test-data-start" />
                                </div>
                                <div class="form-group">
                                    <label for="test-data-finish">Dates generated till:</label>
                                    <input type="datetime-local" id="test-data-finish" />
                                </div>
                            </div>
                        </details>
                        <button type="submit" id="introSubmitBtn" class="">Close</button>
                    </fieldset>
                </form>
            </div>
        </div>

        <main>
        <div class="managing" role="toolbar" aria-label="Task management actions">
            <button class="filter hide-if-no-tasks">Filter</button>
            <button class="add">Add new task</button>

            <div class="all-container">
                <button class="all" aria-haspopup="true" aria-expanded="false" aria-controls="all-menu-list">All tasks &#9660;</button>
                <div class="all-menu" id="all-menu-list" role="menu">
                    <button class="all-hide menu-item">Hide (from screen)</button>
                    <button class="all-rem menu-item">Remove (totally)</button>
                    <button class="all-show menu-item">Show (it and only it)</button>
                    <button class="all-sel menu-item">Un/Select</button>
                    <div class="export-sub-container">
                        <button class="export-sub-btn menu-item">&#9664; Export to ...</button>
                        <div class="export-sub-menu">
                            <button class="export-all-file menu-item">External file</button>
                            <button class="export-all-add menu-item">Localstorage (&amp;add)</button>
                            <button class="export-all-rep menu-item">Localstorage (&amp;replace)</button>
                        </div>
                    </div>
                    <div class="import-sub-container">
                        <button class="import-sub-btn menu-item">&#9664; Import from ...</button>
                        <div class="import-sub-menu">
                            <input type="file" id="file-import-1" class="import-input-add" />
                            <label for="file-import-1" class="menu-item lbl-file-import-add"
                                >External file (&amp;add)</label
                            >
                            <input type="file" id="file-import-rep-2" class="import-input-rep" />
                            <label for="file-import-rep-2" class="lbl-file-import-rep menu-item"
                                >External file (&amp;replace)</label
                            >
                            <button class="import-loc-add menu-item">Localstorage (&amp;add)</button>
                            <button class="import-loc-rep menu-item">Localstorage (&amp;replace)</button>
                        </div>
                    </div>
                    <button class="all-stat hide-if-no-tasks menu-item">Statistic</button>
                </div>
            </div>

            <div class="selected-container">
                <button class="selected">Selected tasks &#9660;</button>
                <div class="selected-menu">
                    <button class="selected-hide menu-item">Hide (from screen)</button>
                    <button class="selected-rem menu-item">Remove (totally)</button>
                    <button class="selected-show menu-item">Show (it and only it)</button>
                    <div class="export-sub-container">
                        <button class="export-sub-btn menu-item">&#9664; Export ...</button>
                        <div class="export-sub-menu">
                            <button class="export-sel-file menu-item">Export to file</button>
                            <button class="export-sel-add menu-item">Add to localstorage</button>
                            <button class="export-sel-rep menu-item">Replace localstorage</button>
                        </div>
                    </div>
                    <button class="selected-stat hide-if-no-tasks menu-item">Statistic</button>
                </div>
            </div>
        </div>

        <table id="task-table">
            <caption class="visually-hidden">
                Tasks list
            </caption>
            <thead>
                <tr class="full-table-header">
                    <th colspan="9" id="full-table-header-width">
                        <button id="openIntroModalButton" aria-label="Open intro modal">
                            <img src="../Data/I_in_circle.png" alt="" />
                        </button>
                        Things to do
                    </th>
                </tr>
                <tr class="column-header">
                    <th data-col-sorting="select" role="button" tabindex="0" aria-label="Sort by Selection">select</th>
                    <th data-col-sorting="number" role="button" tabindex="1" aria-label="Sort by id">ID</th>
                    <th data-col-sorting="done" role="button" tabindex="2" aria-label="Sort by Done">Done</th>
                    <th data-col-sorting="group" role="button" tabindex="3" aria-label="Sort by Group">Group</th>
                    <th data-col-sorting="priority" role="button" tabindex="4" aria-label="Sort by priority">
                        Priority
                    </th>
                    <th data-col-sorting="details" role="button" tabindex="5" aria-label="Sort by details">
                        Task details
                    </th>
                    <th data-col-sorting="deadline" role="button" tabindex="6" aria-label="Sort by deadline">
                        Deadline
                    </th>
                    <th data-col-sorting="created" role="button" tabindex="7" aria-label="Sort by creation time">
                        Created at
                    </th>
                    <th data-col-sorting="updated" role="button" tabindex="8" aria-label="Sort by updating time">
                        Updated at
                    </th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="table-body">
                <tr>
                    <td>
                        <input type="checkbox" data-task-checked="selection" />
                    </td>
                    <td class="task-id">1</td>
                    <td>
                        <input type="checkbox" data-task-checked="status" />
                    </td>
                    <td>Home</td>
                    <td>1</td>
                    <td>Create first task and put it into the DB</td>
                    <td>9/Feb/2019 10:56 (Isr TZ)</td>
                    <td>9/Mar/2026 10:56 (Isr TZ)</td>
                    <td>22/Jun/2028 22:12 (Isr TZ)</td>
                    <td>
                        <button class="activity editRow" aria-label="Edit task">+</button>
                        <button class="activity removeRow" aria-label="Remove task">-</button>
                        <button class="activity showTaskHistory" aria-label="Show task history">...</button>
                    </td>
                </tr>
            </tbody>
            </main>
        </table>
    </body>
</html>
