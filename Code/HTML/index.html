<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Final JS project</title>
        <link rel="stylesheet" href="../CSS/style.css" />
        <link rel="stylesheet" href="../CSS/modal.css" />
        <script type="module" src="../JS/script.js"></script>
    </head>
    <body>
        <div class="modal-overlay" id="modalOverlay">
            <div class="modal">
                <button id="closeBtn" class="close-button">&times;</button>
                <form>
                    <fieldset>
                        <legend id="modal-legend">New Task Data</legend>
                        <div class="form-group">
                            <label for="task-is-done">Done:</label>
                            <input type="checkbox" id="task-is-done" />
                        </div>

                        <div class="form-group">
                            <label for="task-group">Group:</label>
                            <input list="groups" id="task-group" />
                            <datalist id="groups">
                                <option value="New group"></option>
                            </datalist>
                        </div>

                        <div class="form-group slider-row">
                            <label for="task-priority">Priority</label>
                            <div class="slider-wrapper">
                                <div class="priority-labels-top">
                                    <span>LOWEST</span>
                                    <output id="priority-value" class="priority-output">5</output>
                                    <span>HIGHEST</span>
                                </div>

                                <input
                                    type="range"
                                    id="task-priority"
                                    min="0"
                                    max="10"
                                    step="1"
                                    value="5"
                                    list="priority-ticks"
                                    class="priority-slider"
                                />
                                <datalist id="priority-ticks">
                                    <option value="10"></option>
                                    <option value="9"></option>
                                    <option value="8"></option>
                                    <option value="7"></option>
                                    <option value="6"></option>
                                    <option value="5"></option>
                                    <option value="4"></option>
                                    <option value="3"></option>
                                    <option value="2"></option>
                                    <option value="1"></option>
                                    <option value="0"></option>
                                </datalist>

                                <div class="priority-labels-bottom">
                                    <span>10</span>
                                    <span>0</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="task-details">Task details:</label>
                            <input type="text" id="task-details" required />
                        </div>
                        <div class="form-group">
                            <label for="task-deadline">Deadline:</label>
                            <input type="datetime-local" id="task-deadline" required />
                        </div>
                        <button type="submit" id="submitBtn" class="hide-only-one">Add task</button>
                    </fieldset>
                </form>
            </div>
        </div>

        <div class="history-modal-overlay" id="historyModalOverlay">
            <div class="history-modal">
                <button id="historyCloseBtn" class="history-close-button">&times;</button>
                <form>
                    <fieldset>
                        <legend id="history-modal-legend">Task history changes</legend>
                        <table id="history-table">
                            <thead>
                                <tr class="column-header">
                                    <th>Select</th>
                                    <th>ID</th>
                                    <th>Done</th>
                                    <th>Task group</th>
                                    <th>Priority</th>
                                    <th>Task details</th>
                                    <th>Dead line</th>
                                    <th>Created at</th>
                                    <th>Updated at</th>
                                </tr>
                            </thead>
                            <tbody id="history-body">
                                <tr>
                                    <td>
                                        <input type="checkbox" />
                                    </td>
                                    <td>10</td>
                                    <td>
                                        <input type="checkbox" />
                                    </td>
                                    <td>Home</td>
                                    <td>1</td>
                                    <td>Create first task and put it into the DB</td>
                                    <td>9/Feb/2019 10:56 (Isr TZ)</td>
                                    <td>9/Mar/2026 10:56 (Isr TZ)</td>
                                    <td>22/Jun/2028 22:12 (Isr TZ)</td>
                                </tr>
                            </tbody>
                        </table>
                        <button type="submit" id="historySubmitBtn">Close history</button>
                    </fieldset>
                </form>
            </div>
        </div>

        <div class="filter-modal-overlay" id="filterModalOverlay">
            <div class="filter-modal">
                <button id="filterCloseBtn" class="filter-close-button">&times;</button>
                <form id="logicalOperatorsForm">
                    <fieldset>
                        <legend>Logical operators</legend>
                        <span id="drag-hint" class="visually-hidden">Drag to the filter field below</span>
                        <div class="drag-row">
                            <button
                                type="button"
                                class="drag-btn"
                                draggable="true"
                                data-type="operator"
                                aria-label="Logical AND operator"
                                aria-describedby="drag-hint"
                            >
                                AND
                            </button>
                            <button
                                type="button"
                                class="drag-btn"
                                draggable="true"
                                data-type="operator"
                                aria-label="Logical OR operator"
                                aria-describedby="drag-hint"
                            >
                                OR
                            </button>
                            <button
                                type="button"
                                class="drag-btn"
                                draggable="true"
                                data-type="operator"
                                aria-label="Open parenthesis"
                                aria-describedby="drag-hint"
                            >
                                (
                            </button>
                            <button
                                type="button"
                                class="drag-btn"
                                draggable="true"
                                data-type="operator"
                                aria-label="Close parenthesis"
                                aria-describedby="drag-hint"
                            >
                                )
                            </button>
                        </div>
                    </fieldset>
                </form>

                <form id="relationsForm">
                    <fieldset>
                        <legend>Relations</legend>
                        <div class="filter-row" id="draggableRow" draggable="true" role="group"
    aria-label="Filter condition row, draggable"
    aria-describedby="drag-hint">
                            <div class="field-group">
                                <label for="field-name">Field name:</label>
                                <select class="field" id="field-name" data-type="bool">
                                    <option value="task-select" data-type="bool">select</option>
                                    <option value="task-id" data-type="number">id</option>
                                    <option value="task-isDone" data-type="bool">isDone</option>
                                    <option value="task-priority" data-type="number">priority</option>
                                    <option value="task-group" data-type="string">group</option>
                                    <option value="task-details" data-type="string">details</option>
                                    <option value="task-deadline" data-type="date-time">deadline</option>
                                    <option value="task-createdAt" data-type="date-time">createdAt</option>
                                    <option value="task-updatedAt" data-type="date-time">updatedAt</option>
                                </select>
                            </div>
                            <div class="field-group">
                                <label for="operation">Operation:</label>
                                <select class="operation" id="operation"></select>
                            </div>
                            <div class="field-group">
                                <label>Value:</label>
                                <div class="value-container" id="field-value"></div>
                            </div>
                        </div>
                    </fieldset>
                </form>

                <form id="finalFilterForm">
                    <fieldset>
                        <legend>Final filter</legend>
                        <textarea id="finalFilter" rows="5" aria-label="Final filter result" readonly></textarea>
                    </fieldset>
                </form>
                <div class="filter-buttons">
                    <button type="button" id="clearFilter">Clear filter</button>
                    <button type="submit" id="filterSubmitBtn">Apply filter</button>
                </div>
            </div>
        </div>

        <div class="managing">
            <button class="filter hide-if-no-tasks">Build filter</button>
            <button class="drop hide-if-no-tasks hide-if-no-filter">Drop filter</button>
            <button class="add">Add new task</button>
            <button class="download hide-if-no-tasks">Download &#9660;</button>
            <div class="upload-container">
                <input type="file" id="file-upload-1" class="upload-input" hidden />
                <label for="file-upload-1" class="custom-upload-btn">Upload &#9650;</label>
            </div>
            <button class="select hide-if-no-tasks">Un/Select All</button>
        </div>

        <table id="task-table">
            <thead>
                <tr class="full-table-header">
                    <th colspan="9" id="full-table-header-width">Things to do</th>
                </tr>
                <tr class="column-header">
                    <th data-col-sorting="select">select</th>
                    <th data-col-sorting="number">ID</th>
                    <th data-col-sorting="done">Done</th>
                    <th data-col-sorting="group">Group</th>
                    <th data-col-sorting="priority">Priority</th>
                    <th data-col-sorting="details">Task details</th>
                    <th data-col-sorting="deadline">Deadline</th>
                    <th data-col-sorting="created">Created at</th>
                    <th data-col-sorting="updated">Updated at</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="table-body">
                <tr>
                    <td>
                        <input type="checkbox" data-task-checked="selection" />
                    </td>
                    <td class="task-id">1</td>
                    <td>
                        <input type="checkbox" data-task-checked="status" />
                    </td>
                    <td>Home</td>
                    <td>1</td>
                    <td>Create first task and put it into the DB</td>
                    <td>9/Feb/2019 10:56 (Isr TZ)</td>
                    <td>9/Mar/2026 10:56 (Isr TZ)</td>
                    <td>22/Jun/2028 22:12 (Isr TZ)</td>
                    <td>
                        <button class="activity editRow" aria-label="Edit task">+</button>
                        <button class="activity removeRow" aria-label="Remove task">-</button>
                        <button class="activity showTaskHistory" aria-label="Show task history">...</button>
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="managing">
            <button class="filter hide-if-no-tasks">Build Filter</button>
            <button class="drop hide-if-no-tasks hide-if-no-filter">Drop filter</button>
            <button class="add">Add new task</button>
            <button class="download hide-if-no-tasks">Download &#9660;</button>
            <div class="upload-container">
                <input type="file" id="file-upload-2" class="upload-input" hidden />
                <label for="file-upload-2" class="custom-upload-btn">Upload &#9650;</label>
            </div>
            <button class="select hide-if-no-tasks">Un/Select All</button>
        </div>
    </body>
</html>
